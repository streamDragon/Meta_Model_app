<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meta Model - ×›×œ×™ ×ª×¨×’×•×œ ×©××•×œ ××˜×” ××•×“×œ</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <script>
        (function () {
            var assetVersion = String(Date.now());
            var appPathPrefix = window.location.pathname.replace(/[^/]*$/, '');

            function withAssetVersion(path) {
                try {
                    var url = new URL(path, window.location.href);
                    url.searchParams.set('v', assetVersion);
                    return url.toString();
                } catch (error) {
                    var separator = path.indexOf('?') === -1 ? '?' : '&';
                    return path + separator + 'v=' + encodeURIComponent(assetVersion);
                }
            }

            function shouldBypassCache(url) {
                if (!url || url.origin !== window.location.origin) {
                    return false;
                }
                var path = url.pathname || '';
                return /(^|\/)(data|js|css)\//.test(path) || /\/package\.json$/.test(path);
            }

            window.__APP_ASSET_VERSION__ = assetVersion;
            window.__withAssetVersion = withAssetVersion;

            window.addEventListener('DOMContentLoaded', function () {
                var hrefNodes = document.querySelectorAll('[data-versioned-href]');
                hrefNodes.forEach(function (node) {
                    var originalHref = node.getAttribute('data-versioned-href');
                    if (originalHref) {
                        node.setAttribute('href', withAssetVersion(originalHref));
                    }
                });

                var srcNodes = document.querySelectorAll('[data-versioned-src]');
                srcNodes.forEach(function (node) {
                    var originalSrc = node.getAttribute('data-versioned-src');
                    if (originalSrc) {
                        node.setAttribute('src', withAssetVersion(originalSrc));
                    }
                });
            });

            if (window.fetch) {
                var originalFetch = window.fetch.bind(window);
                window.fetch = function (resource, init) {
                    var rawUrl = null;
                    if (typeof resource === 'string' || resource instanceof URL) {
                        rawUrl = String(resource);
                    }

                    if (!rawUrl) {
                        return originalFetch(resource, init);
                    }

                    try {
                        var url = new URL(rawUrl, window.location.href);
                        if (!shouldBypassCache(url)) {
                            return originalFetch(resource, init);
                        }

                        url.searchParams.set('v', assetVersion);

                        var nextInit;
                        if (!init) {
                            nextInit = { cache: 'no-store' };
                        } else if (!Object.prototype.hasOwnProperty.call(init, 'cache')) {
                            nextInit = Object.assign({}, init, { cache: 'no-store' });
                        } else {
                            nextInit = init;
                        }

                        return originalFetch(url.toString(), nextInit);
                    } catch (error) {
                        return originalFetch(resource, init);
                    }
                };
            }

            if ('serviceWorker' in navigator) {
                window.addEventListener('load', function () {
                    navigator.serviceWorker.getRegistrations().then(function (registrations) {
                        registrations.forEach(function (registration) {
                            try {
                                var scopeUrl = new URL(registration.scope);
                                if (scopeUrl.origin === window.location.origin && scopeUrl.pathname.indexOf(appPathPrefix) === 0) {
                                    registration.unregister().catch(function () {});
                                }
                            } catch (error) {}
                        });
                    }).catch(function () {});
                });
            }

            var stylesheet = document.createElement('link');
            stylesheet.rel = 'stylesheet';
            stylesheet.href = withAssetVersion('css/style.css');
            document.head.appendChild(stylesheet);
        })();
    </script>
</head>
<body>
    <!-- SPLASH SCREEN -->
    <div id="splash-screen" class="splash-screen">
        <div class="splash-content">
            <div class="splash-logo">ğŸ§ </div>
            <h1 class="splash-title">Meta Model</h1>
            <p class="splash-subtitle">×›×œ×™ ×ª×¨×’×•×œ ×©××•×œ ××˜×” ××•×“×œ</p>
            <div class="splash-loading">
                <span class="splash-dot"></span>
                <span class="splash-dot"></span>
                <span class="splash-dot"></span>
            </div>
        </div>
    </div>

    <div id="app-version-floating" class="app-version-floating" aria-live="polite">v...</div>
    <div class="container">
        <header>
            <h1>ğŸ§  Meta Model - ×›×œ×™ ×ª×¨×’×•×œ</h1>
            <p>×ª×¨×’×œ ×©××•×œ ××˜×” ××•×“×œ ×©×œ Richard Bandler ×¢×œ ×¤×™ ×”×›×œ×œ×™× ×©×œ NLP</p>
            <div class="onboarding-hint" id="hint-box" style="display:none">
                <small id="hint-text"></small>
                <button onclick="closeHint()" class="close-hint">âœ•</button>
            </div>
        </header>

        <nav class="tabs">
            <button class="tab-btn active" data-tab="home">×‘×™×ª</button>
            <button class="tab-btn" data-tab="scenario-trainer">×¡×¦× ×•×ª Execution</button>
            <button class="tab-btn" data-tab="comic-engine">Comic Engine</button>
            <button class="tab-btn" data-tab="categories">×§×˜×’×•×¨×™×•×ª</button>
            <button class="tab-btn" data-tab="practice-question">×ª×¨×’×•×œ ×©××œ×•×ª</button>
            <button class="tab-btn" data-tab="practice-radar">Meta Radar</button>
            <button class="tab-btn" data-tab="practice-triples-radar">Triples Radar</button>
            <button class="tab-btn" data-tab="practice-wizard">SQHCEL Wizard</button>
            <button class="tab-btn" data-tab="practice-verb-unzip">×¤×•×¢×œ ×œ× ××¤×•×¨×˜</button>
            <button class="tab-btn" data-tab="blueprint">Blueprint Builder</button>
            <button class="tab-btn" data-tab="prismlab">××¢×‘×“×ª ×¤×¨×™×–××•×ª</button>
            <button class="tab-btn" data-tab="about">×¢×œ ×”×¤×¨×•×™×§×˜</button>
        </nav>
        <div class="mobile-tab-nav" aria-label="× ×™×•×•×˜ ×‘× ×™×™×“">
            <label for="mobile-tab-select">××¢×‘×¨ ×œ××¡×š</label>
            <select id="mobile-tab-select" class="mobile-tab-select" aria-label="××¢×‘×¨ ×‘×™×Ÿ ××¡×›×™×"></select>
        </div>

        <section id="global-comic-strip" class="global-comic-strip hidden" aria-label="Comic strip preview">
            <div class="global-comic-strip-inner">
                <article class="global-comic-main">
                    <img id="global-comic-main-img" src="" alt="" loading="lazy">
                    <div class="global-comic-main-meta">
                        <div>
                            <p class="global-comic-eyebrow">Comic Layer</p>
                            <h3 id="global-comic-main-title">Scene</h3>
                            <p id="global-comic-main-subtitle"></p>
                        </div>
                        <div class="global-comic-main-actions">
                            <button id="global-comic-main-preview" class="global-comic-main-link" type="button">×ª×¦×•×’×”</button>
                            <button id="global-comic-main-practice" class="global-comic-main-link global-comic-main-link-primary" type="button">×œ×ª×¨×’×•×œ</button>
                        </div>
                    </div>
                </article>
                <div id="global-comic-thumbs" class="global-comic-thumbs" role="list"></div>
            </div>
        </section>

        <div id="comicPreviewModal" class="comic-preview-modal hidden" role="dialog" aria-modal="true" aria-labelledby="comicPreviewTitle">
            <div class="comic-preview-dialog">
                <button id="comicPreviewClose" class="comic-preview-close" type="button" aria-label="×¡×’×™×¨×”">âœ•</button>
                <h3 id="comicPreviewTitle">×ª×¦×•×’×ª ×§×•××™×§×¡</h3>
                <img id="comicPreviewImage" src="" alt="" loading="lazy">
                <p id="comicPreviewSubtitle"></p>
                <div class="comic-preview-actions">
                    <button id="comicPreviewGoPractice" class="btn btn-primary" type="button">××¢×‘×¨ ×œ×ª×¨×’×•×œ ×‘×¡×¦× ×”</button>
                </div>
            </div>
        </div>

        <!-- HOME TAB -->
        <section id="home" class="tab-content active">
            <div class="card">
                <h2>×‘×¨×•×›×™× ×”×‘××™×! ğŸ‘‹</h2>
                <p id="app-version-chip" class="app-version-chip">×’×¨×¡×”: × ×˜×¢×Ÿ...</p>
                <p>Meta Model ×”×™× ×˜×›× ×™×§×” ×‘-NLP ×”××¡×™×™×¢×ª ×œ×–×™×”×•×™ ×•×ª×™×§×•×Ÿ ×”×¤×¨×•×ª ×©×¤×” ×©××’×‘×™×œ×•×ª ××•×ª× ×•.</p>
                
                <div class="intro-grid">
                    <div class="intro-item">
                        <h3>ğŸ¯ ××” ×–×” Meta Model?</h3>
                        <p>××•×“×œ ×©×¤×” ×”××–×”×” 3 ×¢×™×•×•×ª×™×: ××—×™×§×”, ×¢×™×•×•×ª ×•×”×›×œ×œ×”.</p>
                    </div>
                    <div class="intro-item">
                        <h3>ğŸ“š ×œ××” ×–×” ×—×©×•×‘?</h3>
                        <p>×–×•×”×™ ×›×œ×™ ×—×–×§×” ×œ×ª×¨×’×•×œ ×¢×•××§, ×›×“×™ ×œ×”×‘×™×Ÿ ×•×œ×©× ×•×ª ×“×¤×•×¡×™× ×©×œ ×—×©×™×‘×”.</p>
                    </div>
                    <div class="intro-item">
                        <h3>âœ¨ ×›×™×¦×“ ×œ×”×©×ª××©?</h3>
                        <p>×‘×—×¨ ×§×˜×’×•×¨×™×” ×œ×œ××•×“ ××• ×¢×‘×•×¨ ×œ×ª×¨×’×•×œ ×›×“×™ ×œ×”×ª×××Ÿ ×‘×©××•×œ ×©××œ×•×ª.</p>
                    </div>
                </div>

                <div class="cta-section">
                    <h3>ğŸš€ ×‘×•××Ÿ × ×ª×—×™×œ!</h3>
                    <p>×‘×—×¨ ××” ×‘×¨×¦×•× ×š ×œ×¢×©×•×ª:</p>
                    <div class="cta-buttons">
                        <button class="btn btn-primary cta-btn" onclick="navigateTo('scenario-trainer')">ğŸ¬ ×¡×¦× ×•×ª Execution</button>
                        <button class="btn btn-primary cta-btn" onclick="navigateTo('comic-engine')">ğŸ§© Comic Engine 2.0</button>
                        <button class="btn btn-secondary cta-btn" onclick="window.open('assets/svg/demo/index.html', '_blank')">ğŸ¨ Comic Kit Demo</button>
                        <button class="btn btn-primary cta-btn" onclick="navigateTo('categories')">ğŸ“š ×œ×•××“ ×§×˜×’×•×¨×™×•×ª</button>
                        <button class="btn btn-primary cta-btn" onclick="navigateTo('blueprint')">ğŸ—ï¸ ×‘× ×” Blueprint</button>
                        <button class="btn btn-primary cta-btn" onclick="navigateTo('prismlab')">ğŸ” ×¡×¨×•×§ ×¤×¨×™×–××•×ª</button>
                        <button class="btn btn-secondary cta-btn" onclick="navigateToPracticePage('question')">ğŸ¯ ×ª×¨×’×•×œ ×©××œ×•×ª</button>
                        <button class="btn btn-secondary cta-btn" onclick="navigateToPracticePage('radar')">âš¡ Meta Radar</button>
                        <button class="btn btn-secondary cta-btn" onclick="navigateToPracticePage('triples-radar')">Triples Radar</button>
                        <button class="btn btn-secondary cta-btn" onclick="navigateToPracticePage('wizard')">ğŸ§  SQHCEL Wizard</button>
                    </div>
                </div>

                <!-- PROGRESS HUB -->
                <div class="progress-hub">
                    <h3>ğŸ“Š ×”×”×ª×§×“××•×ª ×©×œ×š</h3>
                    <div class="progress-grid">
                        <div class="progress-card">
                            <span class="progress-icon">ğŸ”¥</span>
                            <p class="progress-label">Streak</p>
                            <p class="progress-value" id="streak-count">0 ×™××™×</p>
                            <small id="streak-date">×”×™×•× ×”×¨××©×•×Ÿ!</small>
                        </div>
                        <div class="progress-card">
                            <span class="progress-icon">â­</span>
                            <p class="progress-label">XP Total</p>
                            <p class="progress-value" id="xp-count">0</p>
                            <small>×›×œ ××©×™××” = × ×§×•×“×•×ª</small>
                        </div>
                        <div class="progress-card">
                            <span class="progress-icon">ğŸŒŸ</span>
                            <p class="progress-label">Stars</p>
                            <p class="progress-value" id="stars-count">0</p>
                            <small>×‘×•× ×•×¡ ××›×œ ×ª×©×•×‘×”</small>
                        </div>
                        <div class="progress-card">
                            <span class="progress-icon">ğŸ†</span>
                            <p class="progress-label">Badges</p>
                            <p class="progress-value" id="badge-count">0</p>
                            <small>×¤×¨×¡×™× ×©×”×¦×‘×¨×ª</small>
                        </div>
                        <div class="progress-card">
                            <span class="progress-icon">ğŸ“ˆ</span>
                            <p class="progress-label">Sessions</p>
                            <p class="progress-value" id="session-count">0</p>
                            <small>×¡×©× ×™× ×©×”×©×œ××ª</small>
                        </div>
                        <div class="progress-card" id="daily-goal-card">
                            <span class="progress-icon">ğŸ¯</span>
                            <p class="progress-label">Daily Goal</p>
                            <p class="progress-value" id="daily-goal-value">0/3</p>
                            <div class="daily-goal-meter" aria-hidden="true">
                                <div class="daily-goal-fill" id="daily-goal-fill"></div>
                            </div>
                            <small id="daily-goal-note">×”×©×œ× 3 ×¤×¢×•×œ×•×ª ×”×™×•×</small>
                        </div>
                        <div class="progress-card">
                            <span class="progress-icon">ğŸ›¡ï¸</span>
                            <p class="progress-label">Streak Charge</p>
                            <p class="progress-value" id="streak-charge-value">0/3</p>
                            <small id="streak-charge-note">×©×•××¨ ×¢×œ ×¨×¦×£ ×‘×™×•× ×¤×¡×¤×•×¡</small>
                        </div>
                    </div>
                    <div id="badges-display" class="badges-display">
                        <!-- Badges will render here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- SCENARIO TRAINER TAB -->
        <section id="scenario-trainer" class="tab-content">
            <div class="scenario-trainer-container">
                <div class="card scenario-trainer-card">
                    <h2>ğŸ¬ Scenario Trainer: ×¤×•×¢×œ ×œ×-××¤×•×¨×˜ â†’ ×ª×”×œ×™×š (TOTE)</h2>
                    <p class="subtitle">×ª×¨×’×•×œ ×§×¦×¨ ××¡×¦× ×” ×œ×—×™×™× ×××™×ª×™×™×: × ×¨××•×œ Predicate, ×¤×™×¨×•×§ ×ª×”×œ×™×š, ×•×™×¦×™××” ××ª×§×™×¢×•×ª ×œ×¦×¢×“ ×‘×™×¦×•×¢ ×‘×¨×•×¨.</p>

                    <div id="scenario-safety-notice" class="scenario-safety-notice hidden" role="alert">
                        × ×¨××” ×©×”×˜×§×¡×˜ ×©×›×ª×‘×ª ××¦×‘×™×¢ ×¢×œ ××¦×•×§×” ×—×¨×™×¤×”. ×¢×¦×¨× ×• ××ª ×”×ª×¨×’×•×œ ×›×¨×’×¢.
                        ×× ×™×© ×¡×›× ×” ××™×™×“×™×ª: 911. ××¤×©×¨ ×’× ×œ×¤× ×•×ª ×œ×§×• 988 (24/7).
                    </div>

                    <!-- HOME -->
                    <div id="scenario-screen-home" class="scenario-screen">
                        <div class="scenario-home-grid">
                            <button id="scenario-home-scenes" class="btn btn-primary scenario-home-btn">ğŸ¬ ×¡×¦× ×•×ª</button>
                            <button id="scenario-home-prisms" class="btn btn-secondary scenario-home-btn">ğŸ§© ×¤×¨×™×–××•×ª (Drag&Drop)</button>
                            <button id="scenario-home-history" class="btn btn-secondary scenario-home-btn">ğŸ•˜ ×”×™×¡×˜×•×¨×™×”</button>
                            <button id="scenario-home-settings" class="btn btn-secondary scenario-home-btn">âš™ï¸ ×”×’×“×¨×•×ª</button>
                        </div>
                        <div class="scenario-home-stats" id="scenario-home-stats"></div>
                    </div>

                    <!-- DOMAIN PICK -->
                    <div id="scenario-screen-domain" class="scenario-screen hidden">
                        <h3>×‘×—×™×¨×ª ×ª×—×•× ×•×¨××”</h3>
                        <div class="blueprint-questions scenario-pick-grid">
                            <div class="q-card">
                                <label for="scenario-domain-select">×ª×—×•×</label>
                                <select id="scenario-domain-select"></select>
                            </div>
                            <div class="q-card">
                                <label for="scenario-difficulty-select">×¨××”</label>
                                <select id="scenario-difficulty-select"></select>
                            </div>
                            <div class="q-card">
                                <label for="scenario-run-size">×›××” ×¡×¦× ×•×ª ×‘×¨×¦×£?</label>
                                <input type="range" id="scenario-run-size" min="5" max="10" value="10" />
                                <span id="scenario-run-size-value">10</span>
                            </div>
                        </div>
                        <div class="step-buttons">
                            <button id="scenario-start-run-btn" class="btn btn-primary">×”×ª×—×œ ×¡×©×Ÿ ×¡×¦× ×•×ª</button>
                            <button id="scenario-back-home-from-domain" class="btn btn-secondary">×—×–×¨×”</button>
                        </div>
                    </div>

                    <!-- SCENARIO -->
                    <div id="scenario-screen-play" class="scenario-screen hidden">
                        <div class="scenario-session-header">
                            <p class="scenario-counter">×¡×¦× ×” <span id="scenario-current-index">1</span>/<span id="scenario-total-count">10</span></p>
                            <p class="scenario-session-meta">× ×§×•×“×•×ª: <span id="scenario-session-score">0</span> | ×¨×¦×£ ×™×¨×•×§: <span id="scenario-session-streak">0</span></p>
                        </div>
                        <div class="progress-bar">
                            <div id="scenario-progress-fill" class="progress-fill"></div>
                        </div>
                        <div class="scenario-story-card">
                            <div class="scenario-role" id="scenario-role"></div>
                            <h3 id="scenario-title"></h3>
                            <div id="scenario-story-lines" class="scenario-story-lines"></div>
                            <p class="scenario-unspecified-line">Predicate ×œ×-××¤×•×¨×˜: <strong id="scenario-unspecified-verb"></strong></p>
                            <div class="scenario-predicate-panel">
                                <p><strong>×¡×•×’ Predicate:</strong> <span id="scenario-predicate-type"></span></p>
                                <p><strong>× ×¨××•×œ:</strong> <span id="scenario-predicate-normalized"></span></p>
                                <p><strong>××” ×—×¡×¨ ×›×“×™ ×œ×¦××ª ××”×œ×•×œ××”:</strong> <span id="scenario-predicate-missing-action"></span></p>
                            </div>
                        </div>
                        <div id="scenario-comic-stage" class="scenario-comic-stage" hidden>
                            <div class="scenario-comic-image-wrap">
                                <img id="scenario-comic-image" src="" alt="" loading="lazy">
                            </div>
                            <div class="scenario-comic-caption">
                                <p class="scenario-comic-label">Comic Scene</p>
                                <h4 id="scenario-comic-title"></h4>
                                <p id="scenario-comic-subtitle"></p>
                            </div>
                        </div>
                        <div id="scenario-options-container" class="scenario-options-container"></div>
                    </div>

                    <!-- FEEDBACK -->
                    <div id="scenario-screen-feedback" class="scenario-screen hidden">
                        <div id="scenario-feedback-mark" class="scenario-feedback-mark"></div>
                        <h3 id="scenario-feedback-title"></h3>
                        <p id="scenario-feedback-text"></p>
                        <div id="scenario-consequence-box" class="scenario-consequence-box hidden">
                            <h4 id="scenario-consequence-title"></h4>
                            <p id="scenario-consequence-action"></p>
                            <p id="scenario-consequence-result"></p>
                        </div>
                        <button id="scenario-show-blueprint-btn" class="btn btn-primary">×”×¨××” ××ª ×”×¤×™×¨×•×§</button>
                    </div>

                    <!-- BLUEPRINT -->
                    <div id="scenario-screen-blueprint" class="scenario-screen hidden">
                        <h3>Action Map: TOTE + Loop</h3>
                        <div class="scenario-tote-map">
                            <h4>××¤×ª ×ª×”×œ×™×š (9 ×¡×œ×•×˜×™×)</h4>
                            <div class="scenario-tote-grid">
                                <div class="scenario-tote-slot">
                                    <h5>A1. Trigger / Frame</h5>
                                    <p id="scenario-tote-trigger"></p>
                                </div>
                                <div class="scenario-tote-slot">
                                    <h5>A2. ××” ×§×•×¨×” ×¨×’×¢ ×œ×¤× ×™</h5>
                                    <p id="scenario-tote-pre-event"></p>
                                </div>
                                <div class="scenario-tote-slot">
                                    <h5>B. Test: ××™×š ×™×•×“×¢×™× ×©×–×” ×§×•×¨×”</h5>
                                    <p id="scenario-tote-evidence"></p>
                                </div>
                                <div class="scenario-tote-slot">
                                    <h5>C1. Operate: ××™×§×¨×•-×¦×¢×“ 1</h5>
                                    <p id="scenario-tote-op1"></p>
                                </div>
                                <div class="scenario-tote-slot">
                                    <h5>C2. Operate: ××™×§×¨×•-×¦×¢×“ 2</h5>
                                    <p id="scenario-tote-op2"></p>
                                </div>
                                <div class="scenario-tote-slot">
                                    <h5>C3. Operate: ××™×§×¨×•-×¦×¢×“ 3</h5>
                                    <p id="scenario-tote-op3"></p>
                                </div>
                                <div class="scenario-tote-slot">
                                    <h5>D1. Interference / ×—×¡×</h5>
                                    <p id="scenario-tote-blocker"></p>
                                </div>
                                <div class="scenario-tote-slot">
                                    <h5>D2. ××” ×§×•×¨×” ××•×˜×•××˜×™×ª</h5>
                                    <p id="scenario-tote-auto"></p>
                                </div>
                                <div class="scenario-tote-slot">
                                    <h5>E. Exit: ××™×š × ×¨××” "×œ× ×ª×§×•×¢"</h5>
                                    <p id="scenario-tote-exit"></p>
                                </div>
                            </div>
                            <div class="scenario-question-engine">
                                <h5>×©××œ×•×ª ×“×™× ××™×•×ª ×œ×¤×™ ×¡×•×’ Predicate</h5>
                                <ul id="scenario-dynamic-questions"></ul>
                                <div class="scenario-probe-buttons">
                                    <button id="scenario-open-box-btn" class="btn btn-secondary">×¤×ª×— ×¢×•×“</button>
                                    <button id="scenario-knife-btn" class="btn btn-secondary">×—×ª×•×š ×“×‘×§</button>
                                </div>
                                <p id="scenario-probe-output" class="scenario-probe-output"></p>
                            </div>
                        </div>
                        <h3>Blueprint ×§×•××¤×§×˜×™</h3>
                        <div class="final-blueprint-display scenario-blueprint-display">
                            <div class="blueprint-section">
                                <h4>ğŸ¯ ××˜×¨×”</h4>
                                <p id="scenario-blueprint-goal"></p>
                            </div>
                            <div class="blueprint-section">
                                <h4>â±ï¸ ×¦×¢×“ ×¨××©×•×Ÿ (10 ×“×§×•×ª)</h4>
                                <p id="scenario-blueprint-first-step"></p>
                            </div>
                            <div class="blueprint-section">
                                <h4>ğŸ§­ ×©×œ×‘×™×</h4>
                                <ul id="scenario-blueprint-steps"></ul>
                            </div>
                            <div class="blueprint-section">
                                <h4>ğŸ§± × ×§×•×“×ª ×ª×§×™×¢×”</h4>
                                <p id="scenario-blueprint-stuck"></p>
                            </div>
                            <div class="blueprint-section">
                                <h4>ğŸ›Ÿ Plan B / ×ª×—×œ×™×£</h4>
                                <p id="scenario-blueprint-planb"></p>
                            </div>
                            <div class="blueprint-section">
                                <h4>âœ… ××“×“ ×”×¦×œ×—×” (Done)</h4>
                                <p id="scenario-blueprint-done"></p>
                            </div>
                        </div>

                        <div class="scenario-green-box">
                            <h4>×”××©×¤×˜ ×”×™×¨×•×§ ×”××•×¦×¢</h4>
                            <p id="scenario-green-sentence"></p>
                            <button id="scenario-copy-green-btn" class="btn btn-secondary">×”×¢×ª×§ ××©×¤×˜ ×™×¨×•×§</button>
                        </div>

                        <div id="scenario-prism-wheel" class="scenario-prism-wheel hidden">
                            <h4>×’×œ×’×œ ×¤×¨×™×–××•×ª ××”×™×¨ (××•×¤×¦×™×•× ×œ×™)</h4>
                            <div id="scenario-prism-items" class="scenario-prism-items"></div>
                            <div id="scenario-prism-detail" class="scenario-prism-detail hidden"></div>
                        </div>

                        <div class="q-card">
                            <label for="scenario-user-note">×”×¢×¨×” ××™×©×™×ª (×¨×©×•×ª): ××” ×ª×’×™×“/×™ ×‘×¤×¢× ×”×‘××”?</label>
                            <textarea id="scenario-user-note" rows="3" placeholder="×›×ª×•×‘/×™ × ×™×¡×•×— ×§×¦×¨ ××• ×ª×•×‘× ×”..."></textarea>
                        </div>

                        <div class="step-buttons">
                            <button id="scenario-finish-scene-btn" class="btn btn-primary">×¡×™×•× ×¡×¦× ×”</button>
                        </div>
                    </div>

                    <!-- SCORE -->
                    <div id="scenario-screen-score" class="scenario-screen hidden">
                        <div id="scenario-stars-row" class="scenario-stars-row"></div>
                        <p id="scenario-score-line" class="scenario-score-line"></p>
                        <p id="scenario-next-green-line" class="scenario-next-green-line"></p>
                        <div id="scenario-result-summary" class="scenario-result-summary hidden">
                            <p><strong>××˜×¨×” ×›×œ×œ×™×ª:</strong> <span id="scenario-result-goal"></span></p>
                            <p><strong>××“×“ ×”×¦×œ×—×”:</strong> <span id="scenario-result-metric"></span></p>
                        </div>
                        <div class="step-buttons">
                            <button id="scenario-next-scene-btn" class="btn btn-primary">×”××©×š ×œ×¡×¦× ×” ×”×‘××”</button>
                            <button id="scenario-back-home-btn" class="btn btn-secondary">×—×–×¨×” ×œ×‘×™×ª ×”×¡×¦× ×•×ª</button>
                        </div>
                    </div>

                    <!-- HISTORY -->
                    <div id="scenario-screen-history" class="scenario-screen hidden">
                        <h3>×”×™×¡×˜×•×¨×™×™×ª ×¡×¦× ×•×ª</h3>
                        <div class="step-buttons">
                            <button id="scenario-export-history-btn" class="btn btn-secondary">×™×™×¦× JSON</button>
                            <button id="scenario-clear-history-btn" class="btn btn-secondary">× ×§×” ×”×™×¡×˜×•×¨×™×”</button>
                            <button id="scenario-back-home-from-history" class="btn btn-primary">×—×–×¨×”</button>
                        </div>
                        <div id="scenario-history-list" class="scenario-history-list"></div>
                    </div>

                    <!-- SETTINGS -->
                    <div id="scenario-screen-settings" class="scenario-screen hidden">
                        <h3>×”×’×“×¨×•×ª ×¡×¦× ×•×ª</h3>
                        <div class="blueprint-questions">
                            <div class="q-card">
                                <label for="scenario-setting-domain">×ª×—×•× ×‘×¨×™×¨×ª ××—×“×œ</label>
                                <select id="scenario-setting-domain"></select>
                            </div>
                            <div class="q-card">
                                <label for="scenario-setting-difficulty">×¨××ª ×‘×¨×™×¨×ª ××—×“×œ</label>
                                <select id="scenario-setting-difficulty"></select>
                            </div>
                            <div class="q-card scenario-toggle-row">
                                <label>
                                    <input type="checkbox" id="scenario-setting-sound" checked />
                                    ×¦×œ×™×œ×™× ×‘××¡×š ×”×¡×¦× ×•×ª
                                </label>
                                <label>
                                    <input type="checkbox" id="scenario-setting-prism" checked />
                                    ×’×œ×’×œ ×¤×¨×™×–××•×ª ××—×¨×™ ×ª×©×•×‘×” ×™×¨×•×§×”
                                </label>
                            </div>
                        </div>
                        <div class="step-buttons">
                            <button id="scenario-save-settings-btn" class="btn btn-primary">×©××•×¨ ×”×’×“×¨×•×ª</button>
                            <button id="scenario-back-home-from-settings" class="btn btn-secondary">×—×–×¨×”</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- COMIC ENGINE TAB -->
        <section id="comic-engine" class="tab-content">
            <div class="card comic-engine-shell">
                <h2>ğŸ­ Comic Engine Flow</h2>
                <p class="subtitle">×“×™××œ×•×’ ×—×™ ×‘×¢××•×“ ××—×“: ×‘×—×™×¨×” â†’ ×ª×’×•×‘×ª ×¦×“ ×©× ×™ â†’ ×ª×’×•×‘×” ×©×œ×š â†’ ×¤×¨×©× ×•×ª â†’ ×—×œ×•×¤×” ×©×›×œ×™×ª + ×•×™×¡×•×ª ×¡×˜×™×™×˜.</p>

                <section id="comicEngine" class="ceflow-engine" dir="rtl">
                    <div class="ceflow-top-actions">
                        <button id="ceflow-info-btn" class="btn btn-secondary ceflow-small-btn" type="button">ğŸ’¡ ×œ××” ×–×” ×¢×•×‘×“?</button>
                    </div>
                    <div id="ceflow-floating-note" class="ceflow-floating-note hidden" aria-live="polite"></div>

                    <header class="ceflow-header">
                        <div class="ceflow-chip-row">
                            <span id="ceflow-domain" class="ceflow-chip">×ª×—×•×</span>
                            <span id="ceflow-progress" class="ceflow-chip">1/1</span>
                            <span id="ceflow-level" class="ceflow-chip">×¨××”</span>
                        </div>
                        <h3 id="ceflow-title" class="ceflow-title">×›×•×ª×¨×ª ×¡×¦× ×”</h3>
                    </header>

                    <div class="ceflow-stage-wrap">
                        <article id="ceflow-left-character" class="ceflow-character-card"></article>

                        <section class="ceflow-stage" aria-live="polite">
                            <div id="ceflow-dialog" class="ceflow-dialog"></div>

                            <div id="ceflow-overlay" class="ceflow-overlay hidden">
                                <div id="ceflow-xray-tags" class="ceflow-xray-tags"></div>
                                <div class="ceflow-stats">
                                    <div class="ceflow-stat">
                                        <span>Flow</span>
                                        <div class="ceflow-bar"><span id="ceflow-stat-flow"></span></div>
                                    </div>
                                    <div class="ceflow-stat">
                                        <span>Agency</span>
                                        <div class="ceflow-bar"><span id="ceflow-stat-agency"></span></div>
                                    </div>
                                    <div class="ceflow-stat">
                                        <span>Shame</span>
                                        <div class="ceflow-bar"><span id="ceflow-stat-shame"></span></div>
                                    </div>
                                </div>
                            </div>
                        </section>

                        <article id="ceflow-right-character" class="ceflow-character-card"></article>
                    </div>

                    <section>
                        <h4 class="ceflow-block-title">×‘×—×¨/×™ ×ª×’×•×‘×”</h4>
                        <div id="ceflow-choice-deck" class="ceflow-choice-deck" role="group" aria-label="××¤×©×¨×•×™×•×ª ×ª×’×•×‘×”"></div>
                    </section>

                    <section id="ceflow-reply-box" class="ceflow-reply-box hidden">
                        <h4 class="ceflow-block-title">×”×¦×“ ×”×©× ×™ ×”×’×™×‘. ××™×š ××ª/×” ×¢×•× ×” ×¢×›×©×™×•?</h4>
                        <div id="ceflow-reply-quick" class="ceflow-reply-quick"></div>
                        <label for="ceflow-reply-input" class="ceflow-input-label">×ª×’×•×‘×” ×©×œ×š:</label>
                        <textarea id="ceflow-reply-input" rows="2" placeholder="×›×ª×‘×• ×ª×’×•×‘×” ××—×ª ××“×•×™×§×ª ×•×§×¦×¨×”..."></textarea>
                        <div class="ceflow-inline-actions">
                            <button id="ceflow-reply-confirm" class="btn btn-primary" type="button">××©×¨ ×ª×’×•×‘×”</button>
                            <small id="ceflow-reply-status" aria-live="polite"></small>
                        </div>
                    </section>

                    <section id="ceflow-feedback" class="ceflow-feedback hidden" aria-live="polite">
                        <div id="ceflow-feedback-left" class="ceflow-feedback-left"></div>
                        <div id="ceflow-feedback-right" class="ceflow-feedback-right"></div>
                    </section>

                    <section id="ceflow-power-card" class="ceflow-power-card hidden">
                        <h4>Power Card: ×‘××§×•× ×ª×’×•×‘×” ××™××¤×•×œ×¡×™×‘×™×ª</h4>
                        <p>×‘×—×¨/×™ ×©××œ×” ××˜×”-××•×“×œ ××—×ª. ××—×¨×™ ×©××œ×” ××“×•×™×§×ª, ×”×“×™××œ×•×’ × ×¤×ª×— ××—×“×©.</p>
                        <div id="ceflow-power-questions" class="ceflow-power-questions"></div>
                        <div id="ceflow-new-info" class="ceflow-new-info hidden"></div>
                        <div class="ceflow-inline-actions">
                            <button id="ceflow-open-blueprint-inner" class="btn btn-secondary" type="button">×‘×•× × ×‘× ×” ×ª×•×›× ×™×ª</button>
                        </div>
                    </section>

                    <section id="ceflow-blueprint" class="ceflow-blueprint hidden"></section>

                    <footer class="ceflow-controls">
                        <button id="ceflow-retry" class="btn btn-secondary" type="button" disabled>â†» × ×¡×” ×©×•×‘</button>
                        <button id="ceflow-toggle-mode" class="btn btn-secondary" type="button">ğŸ“š ××¦×‘ ×œ×™××•×“</button>
                        <button id="ceflow-open-blueprint" class="btn btn-secondary hidden" type="button">ğŸ§­ ×‘×•× × ×‘× ×” ×ª×•×›× ×™×ª</button>
                        <button id="ceflow-next-scene" class="btn btn-primary" type="button" disabled>â¡ ×¡×¦× ×” ×”×‘××”</button>
                    </footer>
                </section>
            </div>
        </section>

        <!-- PRISM LAB TAB -->
        <section id="prismlab" class="tab-content">
            <div class="prism-container">
                <div class="card">
                    <h2>ğŸ” ××¢×‘×“×ª ×¤×¨×™×–××•×ª (Prism Lab)</h2>
                    <p>×‘×—×¨ ×¤×¨×™×–××” ×œ×¡×¨×™×§×”, ×”×•×¦×‘ ×©××œ×ª ×¢×•×’×Ÿ ××—×ª, ×•××¤×” ××ª ×”×ª×©×•×‘×•×ª ×¢×œ ×¨××•×ª ×œ×•×’×™×•×ª.</p>

                    <div class="prism-grid" id="prism-library">
                        <!-- Prism cards will be rendered here -->
                    </div>

                    <div id="prism-detail" class="prism-detail hidden">
                        <h3 id="prism-name"></h3>
                        <p id="prism-desc"></p>
                        <div class="anchor-box">
                            <strong>×©××œ×ª ×”×¢×•×’×Ÿ:</strong>
                            <p id="prism-anchor" class="anchor-question"></p>
                        </div>
                        <div id="prism-deep-guide" class="prism-deep-guide"></div>

                        <div class="mapping-form">
                            <div class="prism-tools-row">
                                <button class="btn btn-secondary audio-mute-btn">×¡××•× ×“ ×¤×¢×™×œ</button>
                            </div>
                            <p class="muted">××œ× ×ª×©×•×‘×•×ª ×œ××¤×” ×œ×¤×™ ×¨××•×ª (E,B,C,V,I,S)</p>
                            <div class="mapping-row">
                                <div class="prepared-items">
                                    <h4>×¨×©×•××•×ª ××•×›× ×•×ª</h4>
                                    <p class="muted">×’×¨×•×¨ ××œ ×”×ª×™×‘×” ××• ×œ×—×¥ ×œ×”×¢×ª×§×”</p>
                                    <div id="prepared-list" class="prepared-list"></div>
                                </div>

                                <div class="level-grid">
                                    <div class="level-item"><label>Environment (E)</label><input id="ans-E" class="mapping-input" /></div>
                                    <div class="level-item"><label>Behavior (B)</label><input id="ans-B" class="mapping-input" /></div>
                                    <div class="level-item"><label>Capabilities (C)</label><input id="ans-C" class="mapping-input" /></div>
                                    <div class="level-item"><label>Values/Beliefs (V)</label><input id="ans-V" class="mapping-input" /></div>
                                    <div class="level-item"><label>Identity (I)</label><input id="ans-I" class="mapping-input" /></div>
                                    <div class="level-item"><label>Belonging (S)</label><input id="ans-S" class="mapping-input" /></div>
                                </div>
                            </div>

                            <div class="q-card">
                                <label>×¢×•×¦××ª ×¨×’×© (1-5)</label>
                                <input type="range" id="prism-emotion" min="1" max="5" value="3" /> <span id="emotion-display">3</span>
                            </div>
                            <div class="q-card">
                                <label>×”×ª× ×’×“×•×ª (1-5)</label>
                                <input type="range" id="prism-resistance" min="1" max="5" value="2" /> <span id="resistance-display">2</span>
                            </div>

                            <div class="step-buttons">
                                <button id="prism-cancel" class="btn btn-secondary">â† ×—×–×•×¨ ×œ×¡×¤×¨×™×”</button>
                                <button id="prism-submit" class="btn btn-primary">××¤×” ×•×”××œ×¥ Pivot â†’</button>
                            </div>
                        </div>

                        <div id="prism-result" class="final-blueprint-display hidden">
                            <!-- Result: pivot recommendation and map -->
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- CATEGORIES TAB -->
        <section id="categories" class="tab-content">
            <div id="categories-container"></div>
        </section>
        <!-- PRACTICE QUESTION TAB -->
        <section id="practice-question" class="tab-content practice-tab-content">
            <div class="practice-container">
                <div class="card practice-intro-card">
                    <h2>×ª×¨×’×•×œ ×“×™× ×××™ ğŸ®</h2>
                    <p class="subtitle">×“×£ 1 ××ª×•×š 3: ×‘× ×™×™×ª ×©××œ×•×ª ××“×•×™×§×•×ª ×¢×œ ××©×¤×˜×™ Meta Model.</p>

                    <div class="practice-filters">
                        <label>×‘×—×¨ ×§×˜×’×•×¨×™×”:</label>
                        <select id="category-select">
                            <option value="">×”×›×œ</option>
                        </select>
                    </div>

                    <section class="practice-section practice-section-question" aria-label="Question Drill Section">
                        <div class="practice-section-header">
                            <h3>1. ×ª×¨×’×™×œ ×‘× ×™×™×ª ×©××œ×•×ª</h3>
                            <p>×›×ª×‘×• ×©××œ×” ××“×•×™×§×ª ×¢×œ ×”××©×¤×˜ ×•×§×‘×œ×• ××©×•×‘ ××™×™×“×™.</p>
                        </div>
                        <div id="question-drill" class="card question-drill-card">
                            <div class="question-drill-header">
                                <h3>×ª×¨×’×™×œ ×‘× ×™×™×ª ×©××œ×•×ª</h3>
                                <small>×‘×—×¨×• ××ª ×”××©×¤×˜, ×›×ª×‘×• ×©××œ×” ×•×ª×™×™×’×• ××ª ×”×›×™×•×•×Ÿ (××—×™×§×”/×¢×™×•×•×ª/×”×›×œ×œ×”).</small>
                            </div>
                            <p id="question-drill-statement" class="question-drill-statement"></p>
                            <textarea id="question-drill-input" rows="3" placeholder="×›×ª×•×‘/×™ ×›××Ÿ ××ª ×”×©××œ×” ×©××—×¤×©×ª ××ª ×”×”× ×—×” ×”× ×¡×ª×¨×ª..."></textarea>
                            <div class="question-drill-controls">
                                <label>
                                    <span>×××•×§×“ ×‘-</span>
                                    <select id="question-drill-category">
                                        <option value="DELETION">Deletion</option>
                                        <option value="DISTORTION">Distortion</option>
                                        <option value="GENERALIZATION">Generalization</option>
                                    </select>
                                </label>
                                <button id="question-drill-check" class="btn btn-primary">×‘×“×•×§ ×©××œ×”</button>
                                <button id="question-drill-next" class="btn btn-secondary">××©×¤×˜ ×—×“×©</button>
                            </div>
                            <div id="question-drill-feedback" class="question-drill-feedback"></div>
                            <div class="question-drill-stats">
                                <span>× ×™×¡×™×•× ×•×ª: <strong id="question-drill-attempts">0</strong></span>
                                <span>×¤×’×™×¢×•×ª: <strong id="question-drill-hits">0</strong></span>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </section>

        <!-- PRACTICE RADAR TAB -->
        <section id="practice-radar" class="tab-content practice-tab-content">
            <div class="practice-container">
                <div class="card practice-intro-card">
                    <h2>Meta Radar âš¡</h2>
                    <p class="subtitle">×“×£ 2 ××ª×•×š 3: ×–×™×”×•×™ ××”×™×¨ ×©×œ ×ª×‘× ×™×•×ª ×‘×–××Ÿ ×××ª, ×¢× × ×™×§×•×“ ×•××©×•×‘.</p>

                    <section class="practice-section practice-section-radar" aria-label="Meta Radar Section">
                        <div class="practice-section-header">
                            <h3>2. Meta Radar</h3>
                            <p>×–×™×”×•×™ ××”×™×¨ ×©×œ ×ª×‘× ×™×•×ª ×‘×–××Ÿ, ×¢× × ×™×§×•×“ ×•×¨××–×•×¨ ×˜×¢×•×™×•×ª.</p>
                        </div>
                        <div id="rapid-pattern-arena" class="card rapid-pattern-card">
                            <div class="rapid-pattern-header">
                                <h3>âš¡ Meta Radar: ××•× ×•×œ×•×’ + ×ª×‘× ×™×ª</h3>
                                <small>×”××™×œ×”/×‘×™×˜×•×™ ×”××•×“×’×© ×”×•× ×”×˜×¨×™×’×¨. ×œ×—×¦×• ×¢×œ ××—×ª ×-15 ×”×ª×‘× ×™×•×ª ×œ×¤× ×™ ×©× ×’××¨ ×”×–××Ÿ.</small>
                            </div>

                            <div class="rapid-pattern-shell">
                                <aside class="rapid-pattern-side">
                                    <div class="rapid-panel rapid-mode-panel">
                                        <label>××¦×‘</label>
                                        <div class="rapid-mode-switch" role="group" aria-label="×‘×—×™×¨×ª ××¦×‘ Meta Radar">
                                            <button id="rapid-mode-learning-btn" type="button" class="rapid-mode-btn is-active">×œ××™×“×”</button>
                                            <button id="rapid-mode-exam-btn" type="button" class="rapid-mode-btn">××‘×—×Ÿ</button>
                                        </div>
                                        <small id="rapid-mode-note" class="rapid-mode-note">×œ××™×“×”: ××¤×©×¨ ×œ×¢×¦×•×¨ ×•×œ×§×‘×œ HELP.</small>
                                        <div class="rapid-mode-utility-row">
                                            <button id="rapid-explain-btn" type="button" class="rapid-inline-btn">×”×¡×‘×¨ ×”×ª×¨×’×™×œ</button>
                                            <button id="rapid-focus-exit-btn" type="button" class="rapid-inline-btn rapid-inline-btn-ghost hidden">×™×¦×™××” ××¤×•×§×•×¡</button>
                                        </div>
                                    </div>

                                    <div class="rapid-panel">
                                        <label for="rapid-case-type">×¡×•×’ ××˜×•×¤×œ</label>
                                        <select id="rapid-case-type" class="rapid-control-select">
                                            <option value="random">×¨× ×“×•××œ×™</option>
                                        </select>
                                    </div>

                                    <div class="rapid-panel">
                                        <label for="rapid-time-limit">×¨××ª ×§×•×©×™ (×–××Ÿ): <strong id="rapid-time-limit-value">12</strong> ×©× ×³</label>
                                        <input id="rapid-time-limit" type="range" min="6" max="25" value="12" />
                                    </div>

                                    <div class="rapid-panel">
                                        <label>×¨××–×•×¨ ×˜×¢×•×™×•×ª</label>
                                        <div id="rapid-traffic-light" class="rapid-traffic-light" data-state="green" aria-label="×¨××–×•×¨ ××¦×‘">
                                            <span class="rapid-light rapid-light-red" aria-hidden="true"></span>
                                            <span class="rapid-light rapid-light-yellow" aria-hidden="true"></span>
                                            <span class="rapid-light rapid-light-green" aria-hidden="true"></span>
                                        </div>
                                        <small id="rapid-errors-label">×˜×¢×•×™×•×ª ×‘×©××œ×”: 0/2</small>
                                    </div>

                                    <div class="rapid-panel rapid-score-panel">
                                        <p>× ×™×§×•×“: <strong id="rapid-score">0</strong></p>
                                        <p>×¨×¦×£: <strong id="rapid-streak">0</strong></p>
                                        <p>×©××œ×”: <strong id="rapid-round">0</strong></p>
                                    </div>
                                    <div class="rapid-actions-row">
                                        <button id="rapid-start-btn" class="btn btn-primary">×”×ª×—×œ ×¡×‘×‘</button>
                                        <button id="rapid-pause-btn" class="btn btn-secondary rapid-pause-btn" disabled>PAUSE</button>
                                        <button id="rapid-help-btn" class="btn btn-secondary rapid-help-btn" disabled>HELP!</button>
                                    </div>
                                </aside>

                                <div class="rapid-pattern-main">
                                    <div class="rapid-monologue-box">
                                        <p id="rapid-monologue-text" class="rapid-monologue-text">×œ×—×¦×• ×¢×œ "×”×ª×—×œ ×¡×‘×‘" ×›×“×™ ×œ×”×ª×—×™×œ ×–×™×”×•×™ ×ª×‘× ×™×•×ª ×‘×–××Ÿ ×××ª.</p>
                                    </div>

                                    <div class="rapid-timer-row">
                                        <div class="rapid-timer-bar" aria-label="××“ ×”×ª×§×“××•×ª ×–××Ÿ">
                                            <span id="rapid-timer-fill"></span>
                                        </div>
                                        <p id="rapid-feedback" class="rapid-feedback" data-tone="info">×××ª×™×Ÿ ×œ×ª×—×™×œ×ª ×¡×‘×‘...</p>
                                    </div>

                                    <div id="rapid-help-panel" class="rapid-help-panel hidden" aria-live="polite">
                                        <h4>HELP Â· ××¦×‘ ×œ××™×“×”</h4>
                                        <div id="rapid-help-content"></div>
                                    </div>

                                    <div id="rapid-pattern-buttons" class="rapid-pattern-buttons" role="group" aria-label="×›×¤×ª×•×¨×™ ×ª×‘× ×™×•×ª"></div>
                                    <div id="rapid-ai-feedback" class="rapid-ai-feedback hidden" aria-live="polite"></div>
                                </div>
                            </div>

                            <div id="rapid-explain-modal" class="rapid-explain-modal hidden" role="dialog" aria-modal="true" aria-labelledby="rapid-explain-title">
                                <div class="rapid-explain-dialog">
                                    <button id="rapid-explain-close-btn" type="button" class="rapid-explain-close" aria-label="×¡×’×™×¨×”">Ã—</button>
                                    <h4 id="rapid-explain-title">××” ×¢×•×©×™× ×‘-Meta Radar?</h4>
                                    <p>×”×ª×¨×’×•×œ ××××Ÿ ×–×™×”×•×™ ××”×™×¨ ×©×œ ×”×¤×¨×•×ª ××˜×”-××•×“×œ ×‘×–××Ÿ ×××ª, ×‘×¨×’×¢ ×©×¢×•×œ×” ×˜×¨×™×’×¨ ×œ×©×•× ×™ ×‘××©×¤×˜.</p>
                                    <ol>
                                        <li>×§×•×¨××™× ××ª ×”×¤×¡×§×” (4 ×©×•×¨×•×ª) ×•×©××™× ×œ×‘ ×œ××™×œ×” ×”××•×“×’×©×ª.</li>
                                        <li>××–×”×™× ××™×–×” ×¡×•×’ ×”×¤×¨×” ××•×¤×¢×œ ×›××Ÿ ××ª×•×š 15 ×”×›×¤×ª×•×¨×™×.</li>
                                        <li>×œ×•×—×¦×™× ××”×¨ ×•×‘×“×™×•×§ ×œ×¤× ×™ ×©× ×’××¨ ×”×–××Ÿ.</li>
                                    </ol>
                                    <p>×”×”×™×’×™×•×Ÿ: ×œ× ×œ× ×—×© ×›×¤×ª×•×¨, ××œ× ×œ×‘× ×•×ª ×¨×¤×œ×§×¡ ×©×œ <strong>×˜×¨×™×’×¨ -> ×¡×•×’ ×”×¤×¨×” -> ×‘×—×™×¨×”</strong>.</p>
                                    <p>×‘×¡×•×£ ×”×ª×¨×’×•×œ ×××•×¨×™× ×œ×“×¢×ª ×œ×–×”×•×ª ××”×¨ ××” ×”××™×œ×” ×”××•×“×’×©×ª ××¡×× ×ª, ×•×œ×‘×—×•×¨ ×ª×‘× ×™×ª ××“×•×™×§×ª ×‘×œ×™ ×œ×”×ª×§×¢.</p>
                                    <div class="rapid-explain-actions">
                                        <button id="rapid-explain-confirm-btn" type="button" class="btn btn-primary">×”×‘× ×ª×™, ×××©×™×›×™×</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </section>

        <section id="practice-triples-radar" class="tab-content practice-tab-content">
            <div class="practice-container">
                <div class="card practice-intro-card">
                    <h2>Triples Radar â€” ×©×œ×©×•×ª ××™×™×§×œ ×‘×¨×™×Ÿ</h2>
                    <p class="subtitle">×–×™×”×•×™ ××”×™×¨ ×©×œ ×§×˜×’×•×¨×™×” ××“×•×™×§×ª ×‘×ª×•×š ×˜×‘×œ×ª ×”×©×œ×©×•×ª (5 ×©×•×¨×•×ª Ã— 3 ×¨×›×™×‘×™×).</p>

                    <section class="practice-section practice-section-triples-radar" aria-label="Triples Radar Section">
                        <div class="practice-section-header">
                            <h3>×‘×—×¨/×™ ×§×˜×’×•×¨×™×” ××ª×•×š ×”×©×œ×©×”</h3>
                            <p>×§×¨×/×™ ××©×¤×˜ ××˜×•×¤×œ, ×‘×—×¨/×™ ×§×˜×’×•×¨×™×”, ×•×§×‘×œ/×™ ××©×•×‘: ××“×•×™×§ / ×§×¨×•×‘ / ×©×•×¨×” ×©×’×•×™×”.</p>
                        </div>

                        <div id="triples-radar-root" class="triples-radar-card">
                            <div class="triples-radar-topbar">
                                <span>×¡×¦× ×” <strong id="triples-radar-counter">1/15</strong></span>
                                <span>× ×™×§×•×“ <strong id="triples-radar-score">0</strong></span>
                                <span>×“×™×•×§×™× <strong id="triples-radar-solved-count">0</strong></span>
                            </div>

                            <p id="triples-radar-step" class="triples-radar-step">×©×œ×‘ 1: ×§×¨×/×™ ××ª ×”××©×¤×˜. ×©×œ×‘ 2: ×‘×—×¨/×™ ×§×˜×’×•×¨×™×”.</p>

                            <div class="triples-radar-statement-wrap">
                                <p class="triples-radar-kicker">××©×¤×˜ ××˜×•×¤×œ</p>
                                <p id="triples-radar-statement" class="triples-radar-statement"></p>
                                <p id="triples-radar-focus-hint" class="triples-radar-focus-hint"></p>
                            </div>

                            <div id="triples-radar-rows" class="triples-radar-rows"></div>

                            <p id="triples-radar-feedback" class="triples-radar-feedback" data-tone="info"></p>

                            <div class="triples-radar-actions">
                                <button class="btn btn-secondary" data-tr-action="hint-row">×¨××– ×œ×©×•×¨×”</button>
                                <button class="btn btn-secondary" data-tr-action="hint-category">×¨××– ×œ×§×˜×’×•×¨×™×”</button>
                                <button class="btn btn-secondary" data-tr-action="restart">××™×¤×•×¡ ×¨×™×¦×”</button>
                                <button class="btn btn-primary" data-tr-action="next">×”×‘×</button>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </section>

        <!-- PRACTICE WIZARD TAB -->
        <section id="practice-wizard" class="tab-content practice-tab-content">
            <div class="practice-container">
                <div class="card practice-intro-card">
                    <h2>SQHCEL Wizard ğŸ§ </h2>
                    <p class="subtitle">×“×£ 3 ××ª×•×š 3: ×’×™×©×•×¨ ×ª×—×•×©×”-×©×¤×” ×œ×¤×™ Sâ†’Qâ†’Hâ†’Câ†’PATHâ†’E/L ×œ×¤× ×™ ××ª×’×•×¨.</p>

                    <section class="practice-section practice-section-wizard" aria-label="SQHCEL Wizard Section">
                        <div class="practice-section-header">
                            <h3>3. SQHCEL Wizard</h3>
                            <p>×’×©×¨ ×‘×™×Ÿ ×ª×—×•×©×” ×œ××©×¤×˜ ×œ×¤× ×™ ××ª×’×•×¨: Sâ†’Qâ†’Hâ†’Câ†’PATHâ†’E/L. ×”×’×•×£ ××¨×’×™×© "××‘×¡×•×œ×•×˜×™" ×œ×¤× ×™ ×©×”××™×œ×™× ×××¨×• "×ª××™×“".</p>
                        </div>
                        <div id="wrinkle-game" class="card wrinkle-game-card">
                            <div class="wrinkle-game-header">
                                <h3>ğŸ§© ×—×©×£ ××ª ×”×›××ª!</h3>
                                <small>×§×•×“× ×—×©×™×¤×”, ××—×¨ ×›×š ××ª×’×•×¨. ×‘×•× ×™× ×¨×¤×œ×§×¡ ××”×™×¨ ×œ×–×™×”×•×™ ×”× ×—×” ×¡××•×™×”.</small>
                                <div class="wrinkle-coverage">
                                    <span>ğŸ¢ ×¢×“ ×›××ª×™× ×¡××•×™×™×</span>
                                    <span>ğŸ¢ ×¢×“ Self-Reference ××™×©×™</span>
                                </div>
                            </div>

                            <div class="wrinkle-score-row">
                                <span>ğŸ”¥ ×¨×¦×£: <strong id="wrinkle-streak">0</strong></span>
                                <span>â­ × ×§×•×“×•×ª: <strong id="wrinkle-points">0</strong></span>
                                <span>â±ï¸ Due: <strong id="wrinkle-due-count">0</strong></span>
                            </div>

                            <div class="wrinkle-round-box">
                                <p id="wrinkle-step-label" class="wrinkle-step-label">×©×œ×‘ 1/2: ×—×©×™×¤×ª ×”×›××ª</p>
                                <p id="wrinkle-statement" class="wrinkle-statement"></p>
                                <div id="wrinkle-options" class="wrinkle-options"></div>
                                <div id="wrinkle-feedback" class="wrinkle-feedback"></div>
                                <button id="wrinkle-next-btn" class="btn btn-primary hidden">××©×¤×˜ ×”×‘×</button>
                                <div id="wrinkle-fx-layer" class="wrinkle-fx-layer" aria-hidden="true"></div>
                            </div>

                            <div class="wrinkle-self-box">
                                <label for="wrinkle-self-input">×‘×“×™×§×ª Self-Reference: ×›×ª×‘×• ××©×¤×˜ ××™×©×™ ×œ×ª×¨×’×•×œ</label>
                                <textarea id="wrinkle-self-input" rows="2" placeholder="×œ×“×•×’××”: ×× ×™ ×œ× ×™×›×•×œ ×œ×”×•×‘×™×œ ××ª ×”×©×™×—×” ×”×–××ª."></textarea>
                                <div class="wrinkle-self-actions">
                                    <button id="wrinkle-add-self-btn" class="btn btn-secondary">×”×•×¡×£ ××©×¤×˜ ××™×©×™ ×œ××©×—×§</button>
                                </div>
                                <ul id="wrinkle-self-list" class="wrinkle-self-list"></ul>
                            </div>
                        </div>
                    </section>
                </div>
            </div>
        </section>

        <section id="practice-verb-unzip" class="tab-content practice-tab-content">
            <div class="practice-container">
                <div class="card practice-intro-card">
                    <h2>×¤×•×¢×œ ×œ× ××¤×•×¨×˜ â€” Unzip Trainer</h2>
                    <p class="subtitle">×ª×¨×’×•×œ ×•×™×–×•××œ×™: ×©××œ×” -> ×ª×©×•×‘×ª ××˜×•×¤×œ ××•×›× ×” -> Drag&Drop ××“×•×™×§ -> ×¡×™×›×•× ×§×™×™×¡.</p>
                    <p style="margin:0 0 10px;color:#335a7d;">×× ×”×¢××•×“ ×‘×ª×•×š ××¡×’×¨×ª ×¦×¨×”, ××¤×©×¨ ×œ×¤×ª×•×— ×‘××¡×š ××œ×.</p>
                    <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:10px;">
                        <a class="btn btn-primary" href="verb_unzip_trainer.html" data-versioned-href="verb_unzip_trainer.html" target="_blank" rel="noopener">×¤×ª×— ×‘××¡×š ××œ×</a>
                        <a class="btn btn-secondary" href="verb_unzip_trainer.html" data-versioned-href="verb_unzip_trainer.html" target="_blank" rel="noopener">×’×¨×¡×ª ×§×•×‘×¥ ×¢×¦×××™</a>
                        <a class="btn btn-secondary" href="prism_research_trainer.html" data-versioned-href="prism_research_trainer.html" target="_blank" rel="noopener">Prism Research Mode (MVP)</a>
                    </div>
                    <iframe
                        title="Unzip Trainer"
                        src="about:blank"
                        data-versioned-src="verb_unzip_trainer.html"
                        style="width:100%;min-height:1450px;border:1px solid #cddbec;border-radius:12px;background:#fff;"
                        loading="lazy"></iframe>
                </div>
            </div>
        </section>

        <!-- BLUEPRINT BUILDER TAB -->
        <section id="blueprint" class="tab-content">
            <div class="blueprint-container">
                <div class="card">
                    <h2>ğŸ—ï¸ Blueprint Builder - ×”×¤×•×š ×¤×¢×•×œ×” ×‘×¢××•××” ×œ×ª×•×›× ×™×ª ×‘×™×¦×•×¢</h2>
                    <p>×”×§×œ×“ ×¤×¢×•×œ×” ×©×¦×¨×™×š ×œ×¢×©×•×ª, ×•×× ×—× ×• × ×”×¤×•×š ××•×ª×” ×œ×ª×•×›× ×™×ª ××¤×•×¨×˜×ª ×¢× ×¦×¢×“×™×, ×ª× ××™×, ×•×—×œ×•×¤×•×ª.</p>

                    <!-- STEP 1: CAPTURE -->
                    <div id="blueprint-step-1" class="blueprint-step active">
                        <div class="step-header">
                            <span class="step-number">1</span>
                            <h3>××” ××ª×” ××•××¨ ×œ×¢×¦××š ×œ×¢×©×•×ª?</h3>
                        </div>
                        <p class="step-desc">×”×§×œ×“ ××ª ×”×¤×¢×•×œ×” ×‘×©×¤×” ×˜×‘×¢×™×ª - ×‘×“×™×•×§ ×›××• ×©×”×™×™×ª ××•××¨ ×œ×¢×¦××š ××• ×©××™×©×”×• ×××¨ ×œ×š.</p>
                        
                        <div class="input-group">
                            <textarea id="action-input" 
                                      placeholder="×“×•×’××”: '×ª×ª×¨×’×œ ××ª ×”-JavaScript ×©×œ×™' ××• '×ª×¡×’×•×¨ ××ª ×”×¤×¨×•×™×§×˜'"
                                      rows="4"></textarea>
                        </div>

                        <div class="step-buttons">
                            <button id="extract-btn" class="btn btn-primary" onclick="extractAndMoveToStep2()">×—×œ×¥ ×•×‘× ×” Blueprint â†’</button>
                        </div>
                    </div>

                    <!-- STEP 2: EXTRACT & SPECIFY -->
                    <div id="blueprint-step-2" class="blueprint-step hidden">
                        <div class="step-header">
                            <span class="step-number">2</span>
                            <h3>×¤×™×¨×•×§ ×”×¤×¢×•×œ×”</h3>
                        </div>

                        <div class="blueprint-questions">
                            <div class="q-card">
                                <label>××” ×”×ª×•×¦××” ×‘×“×™×•×§? (××™×š ×–×” × ×¨××” ×‘×”×¦×œ×—×”?)</label>
                                <textarea id="q-success" placeholder="×ª×•×¤×¡×ª×™ ××ª ×”×§×•× ×¡×¤×˜ ×©×œ async/await"></textarea>
                            </div>

                            <div class="q-card">
                                <label>××” ×”×¦×¢×“ ×”×¨××©×•×Ÿ ×”×§×˜×Ÿ ×‘×™×•×ª×¨?</label>
                                <textarea id="q-first-step" placeholder="×¤×ª×— ×˜××‘ ×‘-VSCode ×•×™×¦×•×¨ ×§×•×‘×¥ test.js"></textarea>
                            </div>

                            <div class="q-card">
                                <label>××” ×”×¦×¢×“ ×”××—×¨×•×Ÿ - ××™×š ×ª×“×¢ ×©×¡×™×™××ª?</label>
                                <textarea id="q-last-step" placeholder="××•×›×œ ×œ×”×©×¨×•×ª ×§×•×“ async ×•×§×•×“ à¤¸inc ×‘×œ×™ ×˜×¢×•×™×•×ª"></textarea>
                            </div>

                            <div class="q-card">
                                <label>××™×–×” 3-5 ×©×œ×‘×™× ×‘×××¦×¢?</label>
                                <textarea id="q-middle-steps" placeholder="1. ×§×¨× ××××¨ | 2. ×¦×¤×” ×‘×•×™×“××• | 3. ×›×ª×•×‘ ×“×•×’××” | 4. ×‘×“×•×§ ×‘×§×•× ×¡×•×œ"></textarea>
                            </div>

                            <div class="q-card">
                                <label>××” ×¦×¨×™×š ×œ×”×™×•×ª × ×›×•×Ÿ ×œ×¤× ×™ ×”×ª×—×œ×”? (××§×•×, ×¦×™×•×“, ×–××Ÿ, ××™×©×•×¨×™×)</label>
                                <textarea id="q-prerequisites" placeholder="×©×¢×” ×—×•×¤×©×™×ª, VSCode ×¤×ª×•×—, ×—×™×‘×•×¨ ××™× ×˜×¨× ×˜"></textarea>
                            </div>

                            <div class="q-card">
                                <label>××™×¤×” ××ª×” ×‘×“×¨×š ×›×œ×œ × ×ª×§×¢?</label>
                                <textarea id="q-friction" placeholder="×× ×™ ×œ× ××‘×™×Ÿ ××ª×™ promises ××¡×ª×™×™××•×ª"></textarea>
                            </div>

                            <div class="q-card">
                                <label>××” Plan B ×›×©× ×ª×§×¢? (×—×œ×•×¤×”, ×§×™×¦×•×¨ ×“×¨×š, ×¢×–×¨×”)</label>
                                <textarea id="q-alternatives" placeholder="××‘×§×© ×¢×–×¨×” ×‘-Stack Overflow ××• ××—×–×•×¨ ×œ-callbacks"></textarea>
                            </div>

                            <div class="q-card">
                                <label>×›××” ×–××Ÿ ×–×” ×××•×¨ ×œ×§×—×ª? (××™× ×™××•× 70% ××©×™××”)</label>
                                <input type="text" id="q-time" placeholder="45 ×“×§×•×ª">
                            </div>
                        </div>

                        <div class="step-buttons">
                            <button id="back-to-capture-btn" class="btn btn-secondary" onclick="goToStep(1)">â† ×—×–×•×¨</button>
                            <button id="gap-analysis-btn" class="btn btn-primary" onclick="extractAndMoveToStep3()">×‘×“×™×§×ª ×¤×¢×¨ ×¦×™×¤×™×•×ª â†’</button>
                        </div>
                    </div>

                    <!-- STEP 3: EXPECTATION GAP -->
                    <div id="blueprint-step-3" class="blueprint-step hidden">
                        <div class="step-header">
                            <span class="step-number">3</span>
                            <h3>×¤×¢×¨ ×¦×™×¤×™×•×ª vs ×™×›×•×œ×ª</h3>
                        </div>
                        <p class="step-desc">×‘×•××Ÿ × ×‘×—×Ÿ ××ª ×”×¤×¢×¨ ×‘×™×Ÿ ××” ×©××¦×¤×™× ×××š ×œ×‘×™×Ÿ ××” ××ª×” ×™×›×•×œ ×œ×¢×©×•×ª ×›×¨×’×¢.</p>

                        <div class="blueprint-questions">
                            <div class="q-card">
                                <label>××™ ××¦×¤×”? (××ª×” / ××™×©×”×• ××—×¨ / ××¢×¨×›×ª)</label>
                                <select id="q-who-expects">
                                    <option value="">×‘×—×¨...</option>
                                    <option value="self">×× ×™ ×‘×¢×¦××™</option>
                                    <option value="other">××™×©×”×• ××—×¨</option>
                                    <option value="system">××¢×¨×›×ª/×—×•×§/×“×“×œ×™×™×Ÿ</option>
                                </select>
                            </div>

                            <div class="q-card">
                                <label>××” ×‘×“×™×•×§ ×”×¦×™×¤×™×™×”?</label>
                                <textarea id="q-expectation" placeholder="×× ×™ ×××•×¨ ×œ×”×ª×¤×§×“ ×›-JavaScript expert"></textarea>
                            </div>

                            <div class="q-card">
                                <label>××™×–×• ×”× ×—×” ×¡××•×™×” ×›××Ÿ? (×¢×œ ××” ×”×¦×™×¤×™×” ×× ×™×—×”?)</label>
                                <textarea id="q-assumption" placeholder="'×–×” ×•×•×“××™ ×§×œ', '×›×•×œ× ×™×•×“×¢×™× ××ª ×–×”', '×¦×¨×™×š 5 ×“×§×•×ª'"></textarea>
                            </div>

                            <div class="q-card">
                                <label>×™×›×•×œ×ª ×›×¨×’×¢ (0-10, ×›×©-10 ×–×” ××•×©×œ×)</label>
                                <input type="range" id="q-ability" min="0" max="10" value="5">
                                <span id="ability-display">5</span>
                            </div>

                            <div class="q-card">
                                <label>××” ×—×¡×¨ ×œ×š ×›×“×™ ×œ×¢×œ×•×ª × ×§×•×“×” ××—×ª?</label>
                                <textarea id="q-gap" placeholder="15 ×“×§×•×ª ×“×•×§×•×× ×˜×¦×™×” / ×›×œ×™ × ×™×ª×•× ×™× / ××™×©×•×¨ / ×§×•× ×” ×“×¢×ª"></textarea>
                            </div>

                            <div class="q-card gap-reframe">
                                <label>ğŸ¯ × ×™×¡×•×— ××—×“×© (×œ×-×××©×™×):</label>
                                <div id="q-reframe" class="reframe-box">
                                    (×”-×”×•×“×¢×” ×ª×ª×¢×“×›×Ÿ ××•×˜×•××˜×™×ª)
                                </div>
                            </div>
                        </div>

                        <div class="step-buttons">
                            <button id="back-to-specify-btn" class="btn btn-secondary" onclick="goToStep(2)">â† ×—×–×•×¨</button>
                            <button id="next-step-btn" class="btn btn-primary" onclick="extractAndMoveToStep4()">×¦×¢×“ ×”×‘× ×•×ª×•×›× ×™×ª â†’</button>
                        </div>
                    </div>

                    <!-- STEP 4: FINAL PLAN -->
                    <div id="blueprint-step-4" class="blueprint-step hidden">
                        <div class="step-header">
                            <span class="step-number">4</span>
                            <h3>×ª×•×›× ×™×ª ×”×‘×™×¦×•×¢ ×¡×•×¤×™×ª âœ¨</h3>
                        </div>

                        <div id="final-blueprint" class="final-blueprint-display">
                            <!-- Blueprint output will go here -->
                        </div>

                        <div id="next-action-box" class="next-action">
                            <h4>ğŸ¯ ×”×¦×¢×“ ×©×œ×š ×”×‘×:</h4>
                            <p id="next-physical-action"></p>
                        </div>

                        <div id="if-stuck-box" class="if-stuck">
                            <h4>×× × ×ª×§×¢×ª:</h4>
                            <p id="if-stuck-content"></p>
                        </div>

                        <div class="action-buttons">
                            <button id="export-json-btn" class="btn btn-secondary" onclick="exportBlueprint()">ğŸ“¥ ×™×™×¦× JSON</button>
                            <button id="start-over-btn" class="btn btn-secondary" onclick="goToStep(1)">ğŸ”„ Blueprint ×—×“×©</button>
                            <button id="do-it-now-btn" class="btn btn-primary" onclick="startTenMinuteTimer()">â±ï¸ ×‘×•××Ÿ × ×¢×©×” ××ª ×–×” ×‘-10 ×“×§×•×ª!</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ABOUT TAB -->
        <section id="about" class="tab-content">
            <div class="card">
                <h2>×¢×œ ×”×¤×¨×•×™×§×˜ ğŸ“–</h2>
                <p><strong>Meta Model - ×›×œ×™ ×ª×¨×’×•×œ ××˜×” ××•×“×œ</strong></p>
                <p>×¤×¨×•×™×§×˜ ×–×” ××¢×•×¦×‘ ×›×“×™ ×œ×¢×–×•×¨ ×œ×œ×•××“×™× ×©×œ NLP (Neuro-Linguistic Programming) ×œ×™×™×©×•× ×˜×›× ×™×§×•×ª Meta Model ×©×œ Richard Bandler ×•-John Grinder.</p>
                
                <h3>×”×§×˜×’×•×¨×™×•×ª ×”×¢×™×§×¨×™×•×ª:</h3>
                <ul>
                    <li><strong>DELETION (××—×™×§×”)</strong> - ××—×™×§×ª ××™×“×¢ ×—×©×•×‘</li>
                    <li><strong>DISTORTION (×¢×™×•×•×ª)</strong> - ×©×™× ×•×™ ×”××¦×™××•×ª</li>
                    <li><strong>GENERALIZATION (×”×›×œ×œ×”)</strong> - ×”×¨×—×‘×” ××¢×‘×¨ ×œ×¦×¨×™×š</li>
                </ul>

                <h3>×”××§×•×¨×•×ª:</h3>
                <ul>
                    <li>Richard Bandler & John Grinder - Founders of NLP</li>
                    <li><a href="https://github.com/streamDragon/Meta_Model_app" target="_blank">GitHub Repository</a></li>
                </ul>

                <p class="footer-text">×¤×™×ª×•×— ×¢×œ ×™×“×™: streamDragon | 2026</p>
            </div>
        </section>
    </div>

    <script>
        (function () {
            var withAssetVersion = window.__withAssetVersion || function (path) { return path; };
            var scriptQueue = [
                'js/hebrew-sanitize.js',
                'js/wr2w-path-core.js',
                'js/triples-radar-core.js',
                'js/app.js',
                'js/triples-radar.js'
            ];

            function loadScript(index) {
                if (index >= scriptQueue.length) {
                    return;
                }

                var script = document.createElement('script');
                script.async = false;
                script.src = withAssetVersion(scriptQueue[index]);
                script.onload = function () {
                    loadScript(index + 1);
                };
                script.onerror = function () {
                    console.error('Failed to load script:', scriptQueue[index]);
                };
                document.body.appendChild(script);
            }

            loadScript(0);
        })();
    </script>
</body>
</html>

